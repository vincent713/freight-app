<!DOCTYPE html>
<html>
<head>
    <title>Freight Load Tracker</title>
    <style>
        body {
            font-family: Arial;
            background-color: #f4f4f4;
            padding: 20px;
        }

        h1 {
            text-align: center;
        }

        input, select, button {
            padding: 8px;
            margin: 5px;
        }

        table {
            width: 100%;
            background: white;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ccc;
            text-align: center;
        }

        th {
            background: #007bff;
            color: white;
        }

        button {
            cursor: pointer;
        }

        .delete-btn {
            background: red;
            color: white;
            border: none;
            padding: 5px 8px;
        }
        .dark body {
    background: #1e293b;
}

.dark #appPage {
    background: #1e293b;
    color: white;
}

.dark .card {
    background: #334155;
    color: white;
}

.dark table {
    background: #334155;
    color: white;
}

.dark th {
    background: #0f172a;
}

.dark tr:nth-child(even) {
    background: #1e293b;
}

.dark input, 
.dark select {
    background: #475569;
    color: white;
    border: 1px solid #64748b;
}

    </style>
</head>
<body>

<div id="loginPage">
    <h2>üîê Freight Login</h2>
    <input type="text" id="username" placeholder="Username"><br><br>
    <input type="password" id="password" placeholder="Password"><br><br>
    <button onclick="login()">Login</button>
    <p id="error" style="color:red;"></p>
</div>

<div id="appPage" style="display:none;">
    <h1>üöõ Freight Load Tracker</h1>
    <button onclick="logout()" style="float:right; margin-bottom:10px;">Logout</button>
    <button onclick="toggleDarkMode()" id="themeToggle" style="margin-left:10px;">
    üåô Dark Mode
</button>


    <input type="text" id="loadId" placeholder="Load ID">
    <input type="text" id="broker" placeholder="Broker Name">
    <input type="date" id="pickupDate">
    <input type="date" id="deliveryDate">
    <input type="number" id="rate" placeholder="Rate ($)">

    <select id="status">
        <option value="In Transit">In Transit</option>
        <option value="Delivered">Delivered</option>
        <option value="Delayed">Delayed</option>
    </select>

    <button onclick="addLoad()">Add Load</button>
    <button onclick="downloadPDF()">Download PDF</button>

    <br><br>
<div style="display:flex; gap:20px; margin:20px 0;">

    <div style="flex:1; background:#f0f8ff; padding:15px; border-radius:8px;">
        <h3>Total Loads</h3>
        <h2 id="totalLoads">0</h2>
    </div>

    <div style="flex:1; background:#e6ffe6; padding:15px; border-radius:8px;">
        <h3>Delivered Loads</h3>
        <h2 id="deliveredLoads">0</h2>
    </div>

    <div style="flex:1; background:#fff0e6; padding:15px; border-radius:8px;">
        <h3>Total Revenue</h3>
        <h2>$<span id="totalRevenue">0</span></h2>
    </div>

</div>
    <input type="text" id="searchInput" 
       placeholder="Search by Load ID or Broker..." 
       onkeyup="searchLoads()" 
       style="width:100%; padding:8px; margin-bottom:15px;">

    <table>
        <thead>
            <tr>
                <th>Load ID</th>
                <th>Broker</th>
                <th>Pickup Date</th>
                <th>Delivery Date</th>
                <th>Rate ($)</th>
                <th>Status</th>
                <th>Action</th>



            </tr>
        </thead>
        <tbody id="loadTable"></tbody>
    </table>
    
</div>

    </tbody>
</table>
function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.text("Freight Load Report", 20, 20);
    doc.save("freight-report.pdf");
}

<script>
function searchLoads() {
    var input = document.getElementById("searchInput").value.toLowerCase();
    var table = document.getElementById("loadTable");
    var rows = table.getElementsByTagName("tr");

    for (var i = 0; i < rows.length; i++) {
        var loadId = rows[i].cells[0].innerText.toLowerCase();
        var broker = rows[i].cells[1].innerText.toLowerCase();

        if (loadId.includes(input) || broker.includes(input)) {
            rows[i].style.display = "";
        } else {
            rows[i].style.display = "none";
        }
    }
}

function applyStatusColor(cell) {
    var status = cell.innerText;

    if (status === "In Transit") {
        cell.style.backgroundColor = "#cce5ff";
        cell.style.color = "#004085";
    } 
    else if (status === "Delivered") {
        cell.style.backgroundColor = "#d4edda";
        cell.style.color = "#155724";
    } 
    else if (status === "Delayed") {
        cell.style.backgroundColor = "#f8d7da";
        cell.style.color = "#721c24";
    }
}

function updateDashboard() {
    var table = document.getElementById("loadTable");
    var total = 0;
    var delivered = 0;

    for (var i = 0; i < table.rows.length; i++) {
        var rate = parseFloat(table.rows[i].cells[4].innerText) || 0;
        var status = table.rows[i].cells[5].innerText;

        total += rate;

        if (status === "Delivered") {
            delivered++;
        }
    }

    document.getElementById("totalLoads").innerText = table.rows.length;
    document.getElementById("deliveredLoads").innerText = delivered;
    document.getElementById("totalRevenue").innerText = total.toFixed(2);
}

function updateTotalRevenue() {
    var table = document.getElementById("loadTable");
    var total = 0;

    for (var i = 0; i < table.rows.length; i++) {
        var rate = parseFloat(table.rows[i].cells[3].innerText) || 0;
        total += rate;
    }

    document.getElementById("totalRevenue").innerText = total.toFixed(2);
}

function login() {
    var user = document.getElementById("username").value;
    var pass = document.getElementById("password").value;

    if(user === "vincent" && pass === "freight2026") {
        document.getElementById("loginPage").style.display = "none";
        document.getElementById("appPage").style.display = "block";
    } else {
        document.getElementById("error").innerText = "Invalid login!";
    }
}

window.onload = function() {
    let savedLoads = JSON.parse(localStorage.getItem("loads")) || [];

    savedLoads.forEach(load => 
        addLoadToTable(
            load.loadId,
            load.broker,
            load.pickupDate,
            load.deliveryDate,
            load.rate,
            load.status
        )
    );

    updateDashboard();

};
window.onload = function() {
    let savedLoads = JSON.parse(localStorage.getItem("loads")) || [];

    savedLoads.forEach(load => 
        addLoadToTable(
            load.loadId,
            load.broker,
            load.pickupDate,
            load.deliveryDate,
            load.rate,
            load.status
        )
    );

    updateDashboard();

};


function addLoad() {
    var loadId = document.getElementById("loadId").value;
    var broker = document.getElementById("broker").value;
    var status = document.getElementById("status").value;
    var pickupDate = document.getElementById("pickupDate").value;
    var deliveryDate = document.getElementById("deliveryDate").value;
    var rate = document.getElementById("rate").value;

    if(loadId === "" || broker === "") {
        alert("Please fill all fields!");
        return;
    }

    addLoadToTable(loadId, broker, pickupDate, deliveryDate, rate, status);
    saveLoad(loadId, broker, pickupDate, deliveryDate, rate, status);

    document.getElementById("loadId").value = "";
    document.getElementById("broker").value = "";
}

function addLoadToTable(loadId, broker, pickupDate, deliveryDate, rate, status) {
    var table = document.getElementById("loadTable");
    var row = table.insertRow();

    row.insertCell(0).innerHTML = loadId;
    row.insertCell(1).innerHTML = broker;
    row.insertCell(2).innerHTML = pickupDate;
    row.insertCell(3).innerHTML = deliveryDate;
    row.insertCell(4).innerHTML = rate;
    var statusCell = row.insertCell(5);
    statusCell.innerHTML = status;
    applyStatusColor(statusCell);


    var deleteCell = row.insertCell(6);
    deleteCell.innerHTML = "<button onclick='deleteRow(this)'>Delete</button>";

    updateDashboard();

}



function saveLoad(loadId, broker, pickupDate, deliveryDate, rate, status) {
    let savedLoads = JSON.parse(localStorage.getItem("loads")) || [];
    savedLoads.push({ loadId, broker, pickupDate, deliveryDate, rate, status });
    localStorage.setItem("loads", JSON.stringify(savedLoads));
}



function deleteRow(button) {
    var row = button.parentNode.parentNode;
    var loadId = row.cells[0].innerText;

    row.parentNode.removeChild(row);

    let savedLoads = JSON.parse(localStorage.getItem("loads")) || [];
    savedLoads = savedLoads.filter(load => load.loadId !== loadId);
    localStorage.setItem("loads", JSON.stringify(savedLoads));
    updateDashboard();


}

function logout() {
    document.getElementById("appPage").style.display = "none";
    document.getElementById("loginPage").style.display = "block";
}

function downloadPDF() {
    var table = document.getElementById("loadTable");

    if (table.rows.length === 0) {
        alert("No loads to export.");
        return;
    }

    var content = "<h1>Freight Load Report</h1>";
    content += "<table border='1' style='border-collapse:collapse; width:100%;'>";
    content += "<tr><th>Load ID</th><th>Broker</th><th>Pickup Date</th><th>Delivery Date</th><th>Rate ($)</th><th>Status</th></tr>";

    for (var i = 0; i < table.rows.length; i++) {
        var row = table.rows[i];
        content += "<tr>";
        content += "<td>" + row.cells[0].innerText + "</td>";
        content += "<td>" + row.cells[1].innerText + "</td>";
        content += "<td>" + row.cells[2].innerText + "</td>";
        content += "<td>" + row.cells[3].innerText + "</td>";
        content += "<td>" + row.cells[4].innerText + "</td>";
        content += "<td>" + row.cells[5].innerText + "</td>";

        content += "</tr>";
    }

    content += "</table>";

    var printWindow = window.open("", "", "width=800,height=600");
    printWindow.document.write(content);
    printWindow.document.close();
    printWindow.print();
}
function toggleDarkMode() {
    document.documentElement.classList.toggle("dark");

    var button = document.getElementById("themeToggle");

    if (document.documentElement.classList.contains("dark")) {
        button.innerText = "‚òÄÔ∏è Light Mode";
    } else {
        button.innerText = "üåô Dark Mode";
    }
}


</script>


</body>
</html>

